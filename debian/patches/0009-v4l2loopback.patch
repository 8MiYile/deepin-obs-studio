From: gregor herrmann <gregoa@debian.org>
Date: Wed, 23 Dec 2020 01:22:56 +0100
Subject: obs-studio: virtual camera not working, modinfo not in path

Bug-Debian: https://bugs.debian.org/977928
---
 plugins/linux-v4l2/linux-v4l2.c  | 2 +-
 plugins/linux-v4l2/v4l2-output.c | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/plugins/linux-v4l2/linux-v4l2.c b/plugins/linux-v4l2/linux-v4l2.c
index 0df5445..e6ac9a2 100644
--- a/plugins/linux-v4l2/linux-v4l2.c
+++ b/plugins/linux-v4l2/linux-v4l2.c
@@ -31,7 +31,7 @@ static bool v4l2loopback_installed()
 {
 	bool loaded = false;
 
-	int ret = system("modinfo v4l2loopback >/dev/null 2>&1");
+	int ret = system("PATH=$PATH:/sbin modinfo v4l2loopback >/dev/null 2>&1");
 
 	if (ret == 0)
 		loaded = true;
diff --git a/plugins/linux-v4l2/v4l2-output.c b/plugins/linux-v4l2/v4l2-output.c
index ab560cb..298dba7 100644
--- a/plugins/linux-v4l2/v4l2-output.c
+++ b/plugins/linux-v4l2/v4l2-output.c
@@ -53,7 +53,7 @@ static bool loopback_module_loaded()
 static int loopback_module_load()
 {
 	return system(
-		"pkexec modprobe v4l2loopback exclusive_caps=1 card_label='OBS Virtual Camera' && sleep 0.5");
+		"PATH=$PATH:/sbin pkexec modprobe v4l2loopback exclusive_caps=1 card_label='OBS Virtual Camera' && sleep 0.5");
 }
 
 static void *virtualcam_create(obs_data_t *settings, obs_output_t *output)
